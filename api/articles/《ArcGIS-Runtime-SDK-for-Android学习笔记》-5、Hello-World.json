{"title":"《ArcGIS Runtime SDK for Android学习笔记》-5、Hello World","slug":"《ArcGIS-Runtime-SDK-for-Android学习笔记》-5、Hello-World","date":"2016-04-10T02:10:28.000Z","updated":"2018-03-23T14:38:57.666Z","comments":true,"path":"api/articles/《ArcGIS-Runtime-SDK-for-Android学习笔记》-5、Hello-World.json","excerpt":"开发环境搭建完成后，按照国际惯例先写一个 Hello World。<br>","covers":["https://img.wshunli.com/ArcGISforAndroid/3/ArcGISforAndroid开发环境搭建9.png-hexo.png","https://img.wshunli.com/ArcGISforAndroid/3/ArcGISforAndroid开发环境搭建10.png-hexo.png"],"content":"<p><strong>开发环境搭建完成后，按照国际惯例先写一个 Hello World。</strong><br><a id=\"more\"></a></p><h1 id=\"ArcGIS-for-Android-项目代码编写\"><a href=\"#ArcGIS-for-Android-项目代码编写\" class=\"headerlink\" title=\"ArcGIS for Android 项目代码编写\"></a>ArcGIS for Android 项目代码编写</h1><h2 id=\"在布局中添加-MapView\"><a href=\"#在布局中添加-MapView\" class=\"headerlink\" title=\"在布局中添加 MapView\"></a>在布局中添加 MapView</h2><p>打开 <code>res&gt;&gt;layout&gt;&gt;activity_main.xml</code> 文件，添加 MapView</p><pre><code class=\"xml\">&lt;com.esri.android.map.MapView\n    android:id=&quot;@+id/map&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot; /&gt;\n</code></pre><p><img src=\"https://img.wshunli.com/ArcGISforAndroid/3/ArcGISforAndroid开发环境搭建9.png-hexo.png\" alt=\"\"></p><h2 id=\"新建-MapView-并设置-UI-和代码的绑定\"><a href=\"#新建-MapView-并设置-UI-和代码的绑定\" class=\"headerlink\" title=\"新建 MapView 并设置 UI 和代码的绑定\"></a>新建 MapView 并设置 UI 和代码的绑定</h2><pre><code class=\"java\">private MapView mMapView = null;\nprivate ArcGISTiledMapServiceLayer mArcGISTiledMapServiceLayer = null;\n</code></pre><p>//设置UI和代码绑定</p><pre><code class=\"java\">mMapView = (MapView)this.findViewById(R.id.map);\n</code></pre><h2 id=\"新建地图图层并添加到-MapView-中\"><a href=\"#新建地图图层并添加到-MapView-中\" class=\"headerlink\" title=\"新建地图图层并添加到 MapView 中\"></a>新建地图图层并添加到 MapView 中</h2><pre><code class=\"java\">String strMapUrl=&quot;http://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineCommunity/MapServer&quot;;\nmArcGISTiledMapServiceLayer = new ArcGISTiledMapServiceLayer(strMapUrl);\nmMapView.addLayer(mArcGISTiledMapServiceLayer);\n</code></pre><p><img src=\"https://img.wshunli.com/ArcGISforAndroid/3/ArcGISforAndroid开发环境搭建10.png-hexo.png\" alt=\"\"></p><h1 id=\"ArcGIS-for-Android-项目运行\"><a href=\"#ArcGIS-for-Android-项目运行\" class=\"headerlink\" title=\"ArcGIS for Android 项目运行\"></a>ArcGIS for Android 项目运行</h1><p>和普通 Android 项目类似，ArcGIS for Android 项目可以在模拟器中运行，也可以在真机中运行</p><h2 id=\"在真机运行项目\"><a href=\"#在真机运行项目\" class=\"headerlink\" title=\"在真机运行项目\"></a>在真机运行项目</h2><p>1、手机需要开启 <code>开发者调试模式</code><br><img src=\"https://img.wshunli.com/ArcGISforAndroid/5/HelloWorld2.png-hexo.png\" alt=\"\"></p><p>注：在 Android 4.2 以后版本的系统中, 开发者模式是默认隐藏的。到 <code>设置 &gt; 关于手机</code> 连续点击版本号7次即可显示。</p><p>2、点击Android Studio工具栏上的<code>Run</code>按钮，运行Android项目。</p><p><img src=\"https://img.wshunli.com/ArcGISforAndroid/5/HelloWorld1.png-hexo.png\" alt=\"\"></p><p>3、选择连接手机设备、点击<code>OK</code>即可</p><p><img src=\"https://img.wshunli.com/ArcGISforAndroid/5/HelloWorld1.1.png-hexo.png\" alt=\"\"></p><p>4、运行效果</p><p><img src=\"https://img.wshunli.com/ArcGISforAndroid/5/HelloWorld2.1.png-hexo.png\" alt=\"\"></p><h2 id=\"在模拟器中运行项目\"><a href=\"#在模拟器中运行项目\" class=\"headerlink\" title=\"在模拟器中运行项目\"></a>在模拟器中运行项目</h2><p>1、点击<code>AVD Manager</code>按钮打开 AVD Manager 界面</p><p><img src=\"https://img.wshunli.com/ArcGISforAndroid/5/HelloWorld3.png-hexo.png\" alt=\"\"></p><p>2、点击左下角的<code>Create Virtual Device</code>，创建模拟器</p><p><img src=\"https://img.wshunli.com/ArcGISforAndroid/5/HelloWorld4.png-hexo.png\" alt=\"\"></p><p>3、可以根据自己的需要配置，这里我默认</p><p><img src=\"https://img.wshunli.com/ArcGISforAndroid/5/HelloWorld5.png-hexo.png\" alt=\"\"></p><p>4、根据自己的需要选择系统镜像、我选择默认</p><p><img src=\"https://img.wshunli.com/ArcGISforAndroid/5/HelloWorld6.png-hexo.png\" alt=\"\"></p><p>5、模拟器配置，注意<code>Graphices</code>选项，选择<code>Hardware</code></p><p>具体可参考:<br><a href=\"http://blog.csdn.net/arcgis_mobile/article/details/7758650\" rel=\"external nofollow noopener noreferrer\" target=\"_blank\">教你5步学会ArcGIS Android模拟器调试</a></p><p><img src=\"https://img.wshunli.com/ArcGISforAndroid/5/HelloWorld7.png-hexo.png\" alt=\"\"></p><p>6、稍等片刻创建完成。</p><p><img src=\"https://img.wshunli.com/ArcGISforAndroid/5/HelloWorld8.png-hexo.png\" alt=\"\"></p><p>7、选择刚刚创建的模拟器，点击<code>Launch emulator</code></p><p><img src=\"https://img.wshunli.com/ArcGISforAndroid/5/HelloWorld9.png-hexo.png\" alt=\"\"></p><p>第一次启动可能有点慢，运行效果如下</p><p><img src=\"https://img.wshunli.com/ArcGISforAndroid/5/HelloWorld10.png-hexo.png\" alt=\"\"></p><p>模拟也要开启开发者模式、方法和真机完全相同</p><p><img src=\"https://img.wshunli.com/ArcGISforAndroid/5/HelloWorld10.1.png-hexo.png\" alt=\"\"></p><p><strong>以下步骤和真机运行类似</strong></p><p>8、点击Android Studio工具栏上的<code>Run</code>按钮，运行Android项目。</p><p><img src=\"https://img.wshunli.com/ArcGISforAndroid/5/HelloWorld1.png-hexo.png\" alt=\"\"></p><p>9、选择连接模拟设备、点击<code>OK</code>即可</p><p><img src=\"https://img.wshunli.com/ArcGISforAndroid/5/HelloWorld11.png-hexo.png\" alt=\"\"></p><p>可能会报错 <code>INSTALL_FAILED_NO_MATCHING_ABIS</code></p><p><img src=\"https://img.wshunli.com/ArcGISforAndroid/5/HelloWorld12.png-hexo.png\" alt=\"\"></p><p>是由于使用了 native libraries 。该 native libraries 不支持当前的 CPU 的体系结构。<br>就是在<code>libs</code>文件夹下删除过多出问题了。我们的模拟器是X86的，可以保留 X86 其他的删除。</p><p>10、再次运行，效果如下</p><p><img src=\"https://img.wshunli.com/ArcGISforAndroid/5/HelloWorld13.png-hexo.png\" alt=\"\"></p><blockquote><p>参考资料<br>1、Running Your App<br><a href=\"https://developer.android.com/training/basics/firstapp/running-app.html\" rel=\"external nofollow noopener noreferrer\" target=\"_blank\">https://developer.android.com/training/basics/firstapp/running-app.html</a><br>2、教你5步学会ArcGIS Android模拟器调试<br><a href=\"http://blog.csdn.net/arcgis_mobile/article/details/7758650\" rel=\"external nofollow noopener noreferrer\" target=\"_blank\">http://blog.csdn.net/arcgis_mobile/article/details/7758650</a></p></blockquote>","categories":[{"name":"移动GIS技术","path":"api/categories/移动GIS技术.json"}],"tags":[{"name":"Android","path":"api/tags/Android.json"},{"name":"ArcGIS","path":"api/tags/ArcGIS.json"},{"name":"ArcGIS Runtime SDK","path":"api/tags/ArcGIS Runtime SDK.json"},{"name":"ArcGIS for Android","path":"api/tags/ArcGIS for Android.json"}]}