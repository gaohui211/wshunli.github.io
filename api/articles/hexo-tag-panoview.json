{"title":"在 Hexo 中插入全景图片","slug":"hexo-tag-panoview","date":"2017-11-30T09:14:59.000Z","updated":"2018-03-17T17:17:52.768Z","comments":true,"path":"api/articles/hexo-tag-panoview.json","excerpt":"一款基于 Three.js 全景显示的 Hexo 插件。","covers":null,"content":"<p>一款基于 Three.js 全景显示的 Hexo 插件。</p><a id=\"more\"></a><h1 id=\"Threejs-介绍\"><a href=\"#Threejs-介绍\" class=\"headerlink\" title=\"Threejs 介绍\"></a>Threejs 介绍</h1><p><a href=\"https://threejs.org/\" rel=\"external nofollow noopener noreferrer\" target=\"_blank\">three.js</a> The aim of the project is to create an easy to use, lightweight, 3D library. The library provides <code>&lt;canvas&gt;</code>, <code>&lt;svg&gt;</code>, CSS3D and WebGL renderers.</p><div id=\"panoview8327\" style=\"margin:0 auto\"></div><script src=\"https://unpkg.com/three@0.88.0/build/three.min.js\"></script><script>var camera,scene,renderer,isUserInteracting=!1,onMouseDownMouseX=0,onMouseDownMouseY=0,lon=0,onMouseDownLon=0,lat=0,onMouseDownLat=0,phi=0,theta=0;function init(){var e,n;(e=document.getElementById(\"panoview8327\")).style.width;(camera=new THREE.PerspectiveCamera(75,2,1,1e3)).target=new THREE.Vector3(0,0,0),scene=new THREE.Scene;var t=new THREE.SphereBufferGeometry(500,60,40);t.scale(-1,1,1);var o=new THREE.MeshBasicMaterial({map:(new THREE.TextureLoader).load(\"https://img.wshunli.com/pano/pano2.jpg\")});n=new THREE.Mesh(t,o),scene.add(n),(renderer=new THREE.WebGLRenderer).setPixelRatio(window.devicePixelRatio),renderer.setSize(window.innerWidth,window.innerHeight),renderer.domElement.style.width=\"800px\",renderer.domElement.style.height=\"400px\",e.appendChild(renderer.domElement),e.addEventListener(\"mousedown\",onDocumentMouseDown,!1),e.addEventListener(\"mousemove\",onDocumentMouseMove,!1),e.addEventListener(\"mouseup\",onDocumentMouseUp,!1),e.addEventListener(\"dragover\",function(e){e.preventDefault(),e.dataTransfer.dropEffect=\"copy\"},!1),e.addEventListener(\"dragenter\",function(e){document.body.style.opacity=.5},!1),e.addEventListener(\"dragleave\",function(e){document.body.style.opacity=1},!1)}function onDocumentMouseDown(e){e.preventDefault(),isUserInteracting=!0,onMouseDownMouseX=e.clientX,onMouseDownMouseY=e.clientY,onMouseDownLon=lon,onMouseDownLat=lat}function onDocumentMouseMove(e){!0===isUserInteracting&&(lon=.1*(onMouseDownMouseX-e.clientX)+onMouseDownLon,lat=.1*(e.clientY-onMouseDownMouseY)+onMouseDownLat)}function onDocumentMouseUp(e){isUserInteracting=!1}function onDocumentMouseWheel(e){var n=camera.fov+.05*e.deltaY;return camera.fov=THREE.Math.clamp(n,10,75),camera.updateProjectionMatrix(),!1}function animate(){requestAnimationFrame(animate),update()}function update(){!1===isUserInteracting&&(lon+=.1),lat=Math.max(-85,Math.min(85,lat)),phi=THREE.Math.degToRad(90-lat),theta=THREE.Math.degToRad(lon),camera.target.x=500*Math.sin(phi)*Math.cos(theta),camera.target.y=500*Math.cos(phi),camera.target.z=500*Math.sin(phi)*Math.sin(theta),camera.lookAt(camera.target),renderer.render(scene,camera)}init(),animate()</script><h1 id=\"Hexo-中插入全景图片\"><a href=\"#Hexo-中插入全景图片\" class=\"headerlink\" title=\"Hexo 中插入全景图片\"></a>Hexo 中插入全景图片</h1><p><a href=\"https://github.com/wshunli/hexo-tag-panoview\" rel=\"external nofollow noopener noreferrer\" target=\"_blank\">hexo-tag-panoview</a> 是一款在 Hexo 中使用 <strong>全景图片</strong> 的插件。</p><p>插件的安装和使用非常的简单，只需要进入博客目录，然后安装：</p><pre><code class=\"bash\">$ npm install hexo-tag-panoview --save\n</code></pre><p>之后在文章内使用 <code>panoview</code> 的 tag 就可以了：</p><pre><code class=\"JavaScript\">{% panoview \"https://img.wshunli.com/pano/pano2.jpg\" 400 800 %}\n\n{% endpanoview %}\n</code></pre><p>其中：<br><code>panoview</code> 和 <code>endpanoview</code> 是 Hexo 的标签，不需要修改；<br><code>https://img.wshunli.com/pano/pano2.jpg</code> 部分是全景照片，建议 1024*512 ；<br><code>400</code> 是指全景的高度；<br><code>800</code> 是指全景的宽度。</p><p>灵感来自 <a href=\"https://threejs.org/examples/?q=pano#webgl_panorama_equirectangular\" rel=\"external nofollow noopener noreferrer\" target=\"_blank\">webgl_panorama_equirectangular</a><br>也是我发布的第二个 npm 组件。</p>","categories":[{"name":"前端技术","path":"api/categories/前端技术.json"}],"tags":[{"name":"Hexo","path":"api/tags/Hexo.json"},{"name":"panoview","path":"api/tags/panoview.json"},{"name":"hexo-tag-panoview","path":"api/tags/hexo-tag-panoview.json"}]}