{"title":"《ArcGIS Runtime SDK for Android学习笔记》-6、地图容器MapView","slug":"《ArcGIS-Runtime-SDK-for-Android学习笔记》-6、地图容器MapView","date":"2016-04-12T08:44:50.000Z","updated":"2018-03-15T17:16:13.097Z","comments":true,"path":"api/articles/《ArcGIS-Runtime-SDK-for-Android学习笔记》-6、地图容器MapView.json","excerpt":null,"covers":["https://img.wshunli.com/ArcGISforAndroid/6/地图的容器MapView1.png-hexo.png"],"content":"<a id=\"more\"></a><h1 id=\"MapView-概述\"><a href=\"#MapView-概述\" class=\"headerlink\" title=\"MapView 概述\"></a>MapView 概述</h1><p>MapView是ArcGIS Runtime SDK for Android的核心组件，通过MapView可以呈现地图服务的数据，并且在MapView中定义了丰富的属性、方法和事件，用户通过MapView可以操作设备的触摸屏，默认MapView可以响应用户的各类手势的操作，GIS的开发中，什么时候都少不了地图操作。MapView是Android中ViewGroup的子类，也是ArcGIS Runtime SDK for Android中的地图容器，与很多ArcGIS API中的Map、MapControl类作用是一样的。</p><center><img src=\"https://img.wshunli.com/ArcGISforAndroid/6/地图的容器MapView1.png-hexo.png\" alt=\"\"></center><h1 id=\"MapView-功能介绍\"><a href=\"#MapView-功能介绍\" class=\"headerlink\" title=\"MapView 功能介绍\"></a>MapView 功能介绍</h1><p>MapView 的强大不仅仅是因为它是呈现地图数据的容器，MapView 为提供丰富的功能，下面来分析 MapView 为提供哪些功能。<br>首先，MapView 具有呈现地图能力，MapView 可以添加一个或多个图层，图层又分很多种，如：切片图层、动态图层、本地图层等等；图层只有添加到 MapView 容器中才能进行显示。<br>其次，通过 MapView 可以设置地图的显示范围、是否允许被旋转、地图背景、地图的最大/最小分辨率及其指定当前显示的分辨率/比例尺。<br>最后，MapView 提供了丰富的手势监听接口，通过这些监听器，可以监听各种手势动作，如点击、双击、移动或长按等操作。</p><h1 id=\"MapView-的使用\"><a href=\"#MapView-的使用\" class=\"headerlink\" title=\"MapView 的使用\"></a>MapView 的使用</h1><h2 id=\"MapView-的添加方式\"><a href=\"#MapView-的添加方式\" class=\"headerlink\" title=\"MapView 的添加方式\"></a>MapView 的添加方式</h2><p>有两种方式可以将 MapView 添加到应用当中：一个是 XML 方式，另一个是硬编码方式；一般多采用 XML 方式，方便调整布局及其属性相关设置。</p><p>1、XML方式</p><pre><code class=\"xml\"> &lt;com.esri.android.map.MapView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n android:layout_width=&quot;match_parent&quot; \n android:layout_height=&quot;match_parent&quot;\n url=&quot;http://www.arcgis.com/home/webmap/viewer.html?webmap=e229d715f7ca4fa980308549fb288165&quot;/&gt;\n</code></pre><p>2、JAVA方式</p><pre><code class=\"java\"> //ArcGISTiledMapServiceLayer class is used to define the Layer that is added to the \n //MapView object.\n MapView mMapView = new MapView(this);\n mMapView.addLayer(new ArcGISTiledMapServiceLayer(\n     &quot;http://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer&quot;));\n setContentView(mMapView);\n</code></pre><h2 id=\"MapView的配置\"><a href=\"#MapView的配置\" class=\"headerlink\" title=\"MapView的配置\"></a>MapView的配置</h2><h3 id=\"XML方式\"><a href=\"#XML方式\" class=\"headerlink\" title=\"XML方式\"></a>XML方式</h3><p>以上内容使用XML实现</p><pre><code class=\"xml\"> &lt;!-- MapView with MapOptions settings for Topo basemap,\n         zoom level, and centered in Costa Mesa, CA. --&gt;\n &lt;com.esri.android.map.MapView\n android:id=&quot;@+id/map&quot;\n android:layout_width=&quot;match_parent&quot; \n android:layout_height=&quot;match_parent&quot;\n mapoptions.MapType=&quot;topo&quot;\n mapoptions.ZoomLevel=&quot;13&quot;\n mapoptions.center=&quot;33.666354, -117.903557&quot;/&gt;\n</code></pre><p>在JAVA中以下代码即可使用</p><pre><code class=\"java\">// Retrieve the MapView, Basemap, ZoomLevel, and Center from XML layout\n MapView mMapView = (MapView) findViewById(R.id.map);\n</code></pre><h3 id=\"JAVA方式\"><a href=\"#JAVA方式\" class=\"headerlink\" title=\"JAVA方式\"></a>JAVA方式</h3><p>1、采用的MapOptions类实例化一个MapView，定义底图，缩放级别，以及中心。</p><pre><code class=\"java\"> MapOptions topo = new MapOptions(MapType.TOPO, 23, -110, 9);\n MapView mapView = new MapView(this, topo);\n</code></pre><p>2、使用 <code>MapOptions</code> 切换底图。</p><pre><code class=\"java\"> MapOptions topo = new MapOptions(MapType.TOPO, 23, -110, 9);\n MapView mapView = new MapView(this, topo);\n</code></pre><h1 id=\"MapView-的常见操作\"><a href=\"#MapView-的常见操作\" class=\"headerlink\" title=\"MapView 的常见操作\"></a>MapView 的常见操作</h1><p>地图常见的操作有缩放、旋转、平移、获取范围、比例尺、分辨率等信息，以及常用的手势操作，其中，经常使用到的功能和常见问题有以下几个：</p><h2 id=\"获取-设置比例尺、分辨率、中心点、范围\"><a href=\"#获取-设置比例尺、分辨率、中心点、范围\" class=\"headerlink\" title=\"获取/设置比例尺、分辨率、中心点、范围\"></a>获取/设置比例尺、分辨率、中心点、范围</h2><p>ArcGIS forAndroid中，MapView具有很多与地图操作有关的方法，其中，与地图的比例尺、分辨率、中心点、范围有关的方法如下：</p><p><strong>1、获取/设置比例尺</strong></p><table><thead><tr><th style=\"text-align:left\">返回类型</th><th style=\"text-align:left\">方法</th><th style=\"text-align:left\">说明</th></tr></thead><tbody><tr><td style=\"text-align:left\">double</td><td style=\"text-align:left\">getScale()</td><td style=\"text-align:left\">获得当前地图的比例尺.</td></tr><tr><td style=\"text-align:left\">double</td><td style=\"text-align:left\">getMaxScale()</td><td style=\"text-align:left\">获得当前地图的最大比例尺.</td></tr><tr><td style=\"text-align:left\">double</td><td style=\"text-align:left\">getMinScale()</td><td style=\"text-align:left\">获得当前地图的最小比例尺.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setScale(double scale)</td><td style=\"text-align:left\">设置当前地图的比例尺.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setMaxScale(double maxScale)</td><td style=\"text-align:left\">设置当前地图的最大比例尺.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setMinScale(double minScale)</td><td style=\"text-align:left\">设置当前地图的最小比例尺.</td></tr></tbody></table><p><strong>2、获取/设置分辨率</strong></p><table><thead><tr><th style=\"text-align:left\">返回类型</th><th style=\"text-align:left\">方法</th><th style=\"text-align:left\">说明</th></tr></thead><tbody><tr><td style=\"text-align:left\">double</td><td style=\"text-align:left\">getResolution()</td><td style=\"text-align:left\">获得当前地图的分辨率.</td></tr><tr><td style=\"text-align:left\">double</td><td style=\"text-align:left\">getMaxResolution()</td><td style=\"text-align:left\">此方法在 10.2.2 以后弃用，使用 getMinScale() 替代.</td></tr><tr><td style=\"text-align:left\">double</td><td style=\"text-align:left\">getMinResolution()</td><td style=\"text-align:left\">此方法在 10.2.2 以后弃用，使用 getMaxScale() 替代.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setResolution(double res)</td><td style=\"text-align:left\">设置当前地图的分辨率.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setMaxResolution(double maxResolution)</td><td style=\"text-align:left\">此方法在 10.2.2 以后弃用，使用 setMinScale(double) 替代.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setMinResolution(double minResolution)</td><td style=\"text-align:left\">此方法在 10.2.2 以后弃用，使用 setMaxScale(double) 替代.</td></tr></tbody></table><p><strong>3、获取/设置中心点</strong></p><table><thead><tr><th style=\"text-align:left\">返回类型</th><th style=\"text-align:left\">方法</th><th style=\"text-align:left\">说明</th></tr></thead><tbody><tr><td style=\"text-align:left\">Point</td><td style=\"text-align:left\">getCenter()</td><td style=\"text-align:left\">获取地图中心点.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">centerAt(Point centerPt, boolean animated)</td><td style=\"text-align:left\">设置地图中心点.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">centerAt(double lat, double lon, boolean animated)</td><td style=\"text-align:left\">设置地图中心点.</td></tr></tbody></table><p><strong>4、获取/设置范围</strong></p><table><thead><tr><th style=\"text-align:left\">返回类型</th><th style=\"text-align:left\">方法</th><th style=\"text-align:left\">说明</th></tr></thead><tbody><tr><td style=\"text-align:left\">Polygon</td><td style=\"text-align:left\">getExtent()</td><td style=\"text-align:left\">返回当前可视区域范围.</td></tr><tr><td style=\"text-align:left\">Envelope</td><td style=\"text-align:left\">getMaxExtent()</td><td style=\"text-align:left\">获取MapView的最大范围.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setExtent(Geometry geometry)</td><td style=\"text-align:left\">设置当前地图显示的空间范围.</td></tr></tbody></table><h2 id=\"地图缩放、平移和旋转\"><a href=\"#地图缩放、平移和旋转\" class=\"headerlink\" title=\"地图缩放、平移和旋转\"></a>地图缩放、平移和旋转</h2><p><strong>1、地图缩放</strong></p><table><thead><tr><th style=\"text-align:left\">返回类型</th><th style=\"text-align:left\">方法</th><th style=\"text-align:left\">说明</th></tr></thead><tbody><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">zoomin()</td><td style=\"text-align:left\">放大地图.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">zoomout()</td><td style=\"text-align:left\">缩小地图.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">zoomTo(Point centerPt, float factor)</td><td style=\"text-align:left\">缩放到给定点.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">zoomToResolution(Point centerPt, double res)</td><td style=\"text-align:left\">设定中心点，缩放到给定分辨率水平.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">zoomToScale(Point centerPt, double scale)</td><td style=\"text-align:left\">设定中心点，缩放到指定比例尺.</td></tr></tbody></table><p><strong>2、地图平移</strong></p><p>MapView的方法中，没有专门针对平移操作，主要原因在于，MapView中已经默认支持平移操作，即使用鼠标或手势拖动地图时就会平移地图，所以无需设置；</p><p><strong>3、地图旋转</strong></p><table><thead><tr><th style=\"text-align:left\">返回类型</th><th style=\"text-align:left\">方法</th><th style=\"text-align:left\">说明</th></tr></thead><tbody><tr><td style=\"text-align:left\">double</td><td style=\"text-align:left\">getRotationAngle()</td><td style=\"text-align:left\">返回当前地图旋转角度（单位degree）.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setRotationAngle(double degree, Point centerPt, boolean animated)</td><td style=\"text-align:left\">将地图旋转到指定的角度（单位degree），度数为正数则按逆时针方向旋转.中心点、动画可选.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setRotationAngle(double degree, float pivotX, float pivotY)</td><td style=\"text-align:left\">以某个点为中心旋转地图.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setAllowRotationByPinch(boolean allowRotationByPinch)</td><td style=\"text-align:left\">允许/取消pinch旋转.</td></tr><tr><td style=\"text-align:left\">boolean</td><td style=\"text-align:left\">isAllowRotationByPinch()</td><td style=\"text-align:left\">返回是否允许pinch时旋转.</td></tr></tbody></table><h2 id=\"地图坐标转换\"><a href=\"#地图坐标转换\" class=\"headerlink\" title=\"地图坐标转换\"></a>地图坐标转换</h2><p>地图坐标转换主要使用下列几个方法，其中，主要使用toMapPoint()方法实现获取地图上的点坐标信息：</p><table><thead><tr><th style=\"text-align:left\">返回类型</th><th style=\"text-align:left\">方法</th><th style=\"text-align:left\">说明</th></tr></thead><tbody><tr><td style=\"text-align:left\">SpatialReference</td><td style=\"text-align:left\">getSpatialReference()</td><td style=\"text-align:left\">返回地图的坐标系统.</td></tr><tr><td style=\"text-align:left\">Point</td><td style=\"text-align:left\">toMapPoint(float screenx, float screeny)</td><td style=\"text-align:left\">将屏幕坐标转换成地图坐标系下的ArcGIS geometry Point坐标.</td></tr><tr><td style=\"text-align:left\">Point</td><td style=\"text-align:left\">toMapPoint(Point src)</td><td style=\"text-align:left\">将屏幕坐标转换成地图坐标系下的ArcGIS geometry Point坐标.</td></tr><tr><td style=\"text-align:left\">Point</td><td style=\"text-align:left\">toScreenPoint(Point src)</td><td style=\"text-align:left\">将地图坐标系下的ArcGIS geometry Point坐标转换成屏幕坐标.</td></tr></tbody></table><h2 id=\"地图手势操作\"><a href=\"#地图手势操作\" class=\"headerlink\" title=\"地图手势操作\"></a>地图手势操作</h2><p>默认情况下的MapView将下面的手势作出回应：</p><ul><li>单指双击和双指手势出来会放大到地图。</li><li>双指双击和捏合手势将缩小地图。</li><li>单指拖动和单击快速滑动手势会平移地图。</li><li>双击后拖动手势将允许进/出地图的缩放持续。</li></ul><table><thead><tr><th style=\"text-align:left\">返回类型</th><th style=\"text-align:left\">方法</th><th style=\"text-align:left\">说明</th></tr></thead><tbody><tr><td style=\"text-align:left\">OnLongPressListener</td><td style=\"text-align:left\">getOnLongPressListener()</td><td style=\"text-align:left\">获取地图长按事件监听.</td></tr><tr><td style=\"text-align:left\">OnPanListener</td><td style=\"text-align:left\">getOnPanListener()</td><td style=\"text-align:left\">获取地图平移事件监听.</td></tr><tr><td style=\"text-align:left\">OnPinchListener</td><td style=\"text-align:left\">getOnPinchListener()</td><td style=\"text-align:left\">获取地图捏夹事件监听.</td></tr><tr><td style=\"text-align:left\">OnSingleTapListener</td><td style=\"text-align:left\">getOnSingleTapListener()</td><td style=\"text-align:left\">获取地图单击事件监听.</td></tr><tr><td style=\"text-align:left\">OnZoomListener</td><td style=\"text-align:left\">getOnZoomListener()</td><td style=\"text-align:left\">获取缩放监听.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setOnLongPressListener(OnLongPressListener onLongPressListener)</td><td style=\"text-align:left\">设置地图长按事件监听.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setOnPanListener(OnPanListener onPanListener)</td><td style=\"text-align:left\">设置地图平移事件监听.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setOnPinchListener(OnPinchListener onPinchListener)</td><td style=\"text-align:left\">设置地图捏夹事件监听.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setOnSingleTapListener(OnSingleTapListener onSingleTapListener)</td><td style=\"text-align:left\">设置地图单击事件监听.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setOnZoomListener(OnZoomListener onZoomListener)</td><td style=\"text-align:left\">设置缩放监听.</td></tr></tbody></table><h1 id=\"MapView-的方法\"><a href=\"#MapView-的方法\" class=\"headerlink\" title=\"MapView 的方法\"></a>MapView 的方法</h1><p>MapView的所有公有方法及描述。</p><table><thead><tr><th style=\"text-align:left\">返回类型</th><th style=\"text-align:left\">方法</th><th style=\"text-align:left\">说明</th></tr></thead><tbody><tr><td style=\"text-align:left\">int</td><td style=\"text-align:left\">addLayer(Layer layer, int index)</td><td style=\"text-align:left\">Adds the child Layer at the given index.</td></tr><tr><td style=\"text-align:left\">int</td><td style=\"text-align:left\">addLayer(Layer layer)</td><td style=\"text-align:left\">Adds the child Layer.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">addLayers(Layer[] layerArray)</td><td style=\"text-align:left\">Adds the Layer array.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">centerAndZoom(double lat, double lon, float levelOrFactor)</td><td style=\"text-align:left\">If the MapView is initialized, centers the map at the given latitude and longitude and zoom the map based on the given factor.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">centerAt(double lat, double lon, boolean animated)</td><td style=\"text-align:left\">If the MapView is initialized, centers the map at the given latitude and longitude; optionally, the change is animated.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">centerAt(Point centerPt, boolean animated)</td><td style=\"text-align:left\">If the MapView is initialized, centers the map at the given point; optionally, the change is animated.</td></tr><tr><td style=\"text-align:left\">Bitmap</td><td style=\"text-align:left\">createSymbolImage(Symbol symbol, Geometry geometry, int width, int height, int color)</td><td style=\"text-align:left\">This method was deprecated in API level . at 10.2.2 use getLegendImage(Symbol, Geometry, int, int, int) instead.</td></tr><tr><td style=\"text-align:left\">Bitmap[]</td><td style=\"text-align:left\">createSymbolImages(Symbol[] symbol, Geometry[] geometry, int width, int height, int color)</td><td style=\"text-align:left\">This method was deprecated in API level . at 10.2.2 use getLegendImages(Symbol[], Geometry[], int, int, int) instead.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">enableWrapAround(boolean enable)</td><td style=\"text-align:left\">Enable or disable the map wrap around feature.</td></tr><tr><td style=\"text-align:left\">ViewGroup.LayoutParams</td><td style=\"text-align:left\">generateLayoutParams(AttributeSet attrs)</td><td style=\"text-align:left\"></td></tr><tr><td style=\"text-align:left\">Callout</td><td style=\"text-align:left\">getCallout()</td><td style=\"text-align:left\">Returns a callout window.</td></tr><tr><td style=\"text-align:left\">Point</td><td style=\"text-align:left\">getCenter()</td><td style=\"text-align:left\">Returns the center of the MapView as an ArcGIS geometry Point.</td></tr><tr><td style=\"text-align:left\">Bitmap</td><td style=\"text-align:left\">getDrawingMapCache(float x, float y, int w, int h)</td><td style=\"text-align:left\">Creates a drawing cache of the map in the given screen coordinates.</td></tr><tr><td style=\"text-align:left\">Polygon</td><td style=\"text-align:left\">getExtent()</td><td style=\"text-align:left\">Returns a polygon comprising of four corners of map in map coordinates.</td></tr><tr><td style=\"text-align:left\">Grid</td><td style=\"text-align:left\">getGrid()</td><td style=\"text-align:left\">Returns the Grid instance of the map which allows for the type and visibility of the grid to be controlled.</td></tr><tr><td style=\"text-align:left\">Layer</td><td style=\"text-align:left\">getLayer(int index)</td><td style=\"text-align:left\">Gets a layer at the given index.</td></tr><tr><td style=\"text-align:left\">Layer</td><td style=\"text-align:left\">getLayerByID(long layerID)</td><td style=\"text-align:left\">Gets a layer by its ID.</td></tr><tr><td style=\"text-align:left\">Layer</td><td style=\"text-align:left\">getLayerByURL(String url)</td><td style=\"text-align:left\">Gets a layer by its service URL.</td></tr><tr><td style=\"text-align:left\">Layer[]</td><td style=\"text-align:left\">getLayers()</td><td style=\"text-align:left\">Returns all child Layers that are added to the MapView.</td></tr><tr><td style=\"text-align:left\">LocationDisplayManager</td><td style=\"text-align:left\">getLocationDisplayManager()</td><td style=\"text-align:left\">Returns the LocationDisplayManager.</td></tr><tr><td style=\"text-align:left\">Envelope</td><td style=\"text-align:left\">getMapBoundaryExtent()</td><td style=\"text-align:left\">This method was deprecated in API level . in 10.2.2, use getMaxExtent() instead</td></tr><tr><td style=\"text-align:left\">Envelope</td><td style=\"text-align:left\">getMaxExtent()</td><td style=\"text-align:left\">Returns the max extent of the map.</td></tr><tr><td style=\"text-align:left\">double</td><td style=\"text-align:left\">getMaxResolution()</td><td style=\"text-align:left\">This method was deprecated in API level . at 10.2.2 please use getMinScale()</td></tr><tr><td style=\"text-align:left\">double</td><td style=\"text-align:left\">getMaxScale()</td><td style=\"text-align:left\">Returns maximum scale.</td></tr><tr><td style=\"text-align:left\">double</td><td style=\"text-align:left\">getMinResolution()</td><td style=\"text-align:left\">This method was deprecated in API level . 10.2.2 please use getMaxScale()</td></tr><tr><td style=\"text-align:left\">double</td><td style=\"text-align:left\">getMinScale()</td><td style=\"text-align:left\">Returns the minimum scale.</td></tr><tr><td style=\"text-align:left\">OnLongPressListener</td><td style=\"text-align:left\">getOnLongPressListener()</td><td style=\"text-align:left\">Gets the OnLongPressListener of the MapView.</td></tr><tr><td style=\"text-align:left\">OnPanListener</td><td style=\"text-align:left\">getOnPanListener()</td><td style=\"text-align:left\">Gets the OnPanListener of the MapView.</td></tr><tr><td style=\"text-align:left\">OnPinchListener</td><td style=\"text-align:left\">getOnPinchListener()</td><td style=\"text-align:left\">Gets the OnPinchListener of the MapView.</td></tr><tr><td style=\"text-align:left\">OnSingleTapListener</td><td style=\"text-align:left\">getOnSingleTapListener()</td><td style=\"text-align:left\">Gets the onSingleTapListener of the MapView.</td></tr><tr><td style=\"text-align:left\">OnStatusChangedListener</td><td style=\"text-align:left\">getOnStatusChangedListener()</td><td style=\"text-align:left\">Gets the OnStatusChangedListener of the MapView.</td></tr><tr><td style=\"text-align:left\">OnZoomListener</td><td style=\"text-align:left\">getOnZoomListener()</td><td style=\"text-align:left\">Gets the OnZoomListener of the MapView.</td></tr><tr><td style=\"text-align:left\">double</td><td style=\"text-align:left\">getResolution()</td><td style=\"text-align:left\">Returns the resolution of the MapView.</td></tr><tr><td style=\"text-align:left\">double</td><td style=\"text-align:left\">getRotationAngle()</td><td style=\"text-align:left\">Returns the current rotation angle of the map in degrees counter-clockwise.</td></tr><tr><td style=\"text-align:left\">double</td><td style=\"text-align:left\">getScale()</td><td style=\"text-align:left\">A convenience method for obtaining the current map scale .</td></tr><tr><td style=\"text-align:left\">SpatialReference</td><td style=\"text-align:left\">getSpatialReference()</td><td style=\"text-align:left\">Returns the spatial coordinate system being used by the MapView.</td></tr><tr><td style=\"text-align:left\">boolean</td><td style=\"text-align:left\">isAllowOneFingerZoom()</td><td style=\"text-align:left\">Returns true if one-finger zooming is allowed.</td></tr><tr><td style=\"text-align:left\">boolean</td><td style=\"text-align:left\">isAllowRotationByPinch()</td><td style=\"text-align:left\">Returns true if the rotation by pinch is allowed.</td></tr><tr><td style=\"text-align:left\">boolean</td><td style=\"text-align:left\">isLoaded()</td><td style=\"text-align:left\">Returns true if the MapView is initialized.</td></tr><tr><td style=\"text-align:left\">boolean</td><td style=\"text-align:left\">isRecycled()</td><td style=\"text-align:left\">Returns true if the MapView has been recycled.</td></tr><tr><td style=\"text-align:left\">boolean</td><td style=\"text-align:left\">isShowMagnifierOnLongPress()</td><td style=\"text-align:left\">This method checks whether the map will show the magnifier when the user performs a tap and hold gesture on the map.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">onChildViewAdded(View parent, View child)</td><td style=\"text-align:left\"></td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">onChildViewRemoved(View parent, View child)</td><td style=\"text-align:left\"></td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">pause()</td><td style=\"text-align:left\">Pauses the map.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">recycle()</td><td style=\"text-align:left\">Releases the resources referenced by the MapView so that they can be recycled.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">removeAll()</td><td style=\"text-align:left\">Removes all child layers from the map.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">removeLayer(int index)</td><td style=\"text-align:left\">Removes a child layer at the given index.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">removeLayer(Layer layer)</td><td style=\"text-align:left\">Removes the child Layer from the parent MapView.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">restoreState(String state)</td><td style=\"text-align:left\">Restores the center and resolution, and the LocationDisplayManager state (whether it was active and whether or not to autopan) from the given state String into the MapView.</td></tr><tr><td style=\"text-align:left\">String</td><td style=\"text-align:left\">retainState()</td><td style=\"text-align:left\">Saves the coordinates of the center of the map, the current map resolution, and the LocationDisplayManager state (whether it was active and whether or not to autopan) as a String.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setAllowMagnifierToPanMap(boolean allow)</td><td style=\"text-align:left\">Flag to indicate if the map should pan when the magnifier gets near the edge of the map’s bounds.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setAllowOneFingerZoom(boolean allowOneFingerZoom)</td><td style=\"text-align:left\">Allows/disallows one-finger zooming.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setAllowRotationByPinch(boolean allowRotationByPinch)</td><td style=\"text-align:left\">Allows/disallow pinch to rotate.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setEsriLogoVisible(boolean visible)</td><td style=\"text-align:left\">Turns on or off the ESRI logo.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setExtent(Geometry geometry, int padding)</td><td style=\"text-align:left\">Zooms the map to the given geometry, so that geometry fits within the bounds of the map with the specified padding between the geometry and edge of the map.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setExtent(Geometry geometry)</td><td style=\"text-align:left\">Zooms the map to the given geometry so that geometry fits within the bounds of the map.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setExtent(Geometry geometry, int padding, boolean animated)</td><td style=\"text-align:left\">Zooms the map to the given geometry, so that geometry fits within the bounds of the map with the specified padding between the geometry and edge of the map; optionally, the change is animated.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setMapBackground(int bkColor, int gridColor, float gridSize, float gridLineSize)</td><td style=\"text-align:left\">Sets the map background with color and grid.</td></tr><tr><td style=\"text-align:left\">boolean</td><td style=\"text-align:left\">setMapOptions(MapOptions options)</td><td style=\"text-align:left\">Switches basemap by the given options.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setMaxExtent(Envelope env)</td><td style=\"text-align:left\">Sets the boundary extent of the map.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setMaxResolution(double maxResolution)</td><td style=\"text-align:left\">This method was deprecated in API level . at 10.2.2 please use setMinScale(double)</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setMaxScale(double maxScale)</td><td style=\"text-align:left\">Sets the maximum scale to which the map can be zoomed in.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setMinResolution(double minResolution)</td><td style=\"text-align:left\">This method was deprecated in API level . at 10.2.2, please use setMaxScale(double)</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setMinScale(double minScale)</td><td style=\"text-align:left\">Set the minimum scale to which the map can be zoomed out.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setOnLongPressListener(OnLongPressListener onLongPressListener)</td><td style=\"text-align:left\">Sets the OnLongPressListener of the MapView.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setOnPanListener(OnPanListener onPanListener)</td><td style=\"text-align:left\">Sets the OnPanListener of the MapView.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setOnPinchListener(OnPinchListener onPinchListener)</td><td style=\"text-align:left\">Sets the onPinchListener of the MapView.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setOnSingleTapListener(OnSingleTapListener onSingleTapListener)</td><td style=\"text-align:left\">Sets the onSingleTapListener of the MapView.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setOnStatusChangedListener(OnStatusChangedListener onStatusChangedListener)</td><td style=\"text-align:left\">Sets the OnStatusChangedListener of the MapView.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setOnZoomListener(OnZoomListener onZoomListener)</td><td style=\"text-align:left\">Sets the OnZoomListener of the MapView.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setResolution(double res)</td><td style=\"text-align:left\">Sets the resolution of the MapView.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setRotationAngle(double degree, Point centerPt, boolean animated)</td><td style=\"text-align:left\">Rotates the map to the given angle in degrees and re-centers the map at the specified map coordinates; optionally, the change is animated.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setRotationAngle(double degree, boolean animated)</td><td style=\"text-align:left\">Rotates the map to the given angle in degrees; optionally, the change is animated.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setRotationAngle(double degree)</td><td style=\"text-align:left\">Rotates the map to the given angle in degrees; if the specified angle is positive, rotation is counter-clockwise, if negative then rotation is clockwise.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setRotationAngle(double degree, float pivotX, float pivotY)</td><td style=\"text-align:left\">Rotates the map to the given angle in degrees, pivoting the rotation around a given point on the screen.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setScale(double scale, boolean animated)</td><td style=\"text-align:left\">Sets the map scale; optionally, the change is animated.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setScale(double scale)</td><td style=\"text-align:left\">Sets the map scale.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">setShowMagnifierOnLongPress(boolean showMagnifier)</td><td style=\"text-align:left\">Sets a flag that defines whether or not the map should show the magnifier when the user performs a long press gesture on the map.</td></tr><tr><td style=\"text-align:left\">Future<boolean></boolean></td><td style=\"text-align:left\">switchBaseMap(BaseMap basemap, Portal portal, OnBaseMapSwitchListener listener)</td><td style=\"text-align:left\">Replaces the basemap layers of this MapView if it was created from a WebMap, otherwise just adds the new basemap layers at the bottom or top of the existing MapView layers, depending on whether they are base or reference layers.</td></tr><tr><td style=\"text-align:left\">Point</td><td style=\"text-align:left\">toMapPoint(float screenx, float screeny)</td><td style=\"text-align:left\">A convenience method that will convert a device’s screen coordinates to an ArcGIS geometry Point that has the same spatial coordinate system as the MapView’s.</td></tr><tr><td style=\"text-align:left\">Point</td><td style=\"text-align:left\">toMapPoint(Point src)</td><td style=\"text-align:left\">A convenience method that will convert a device’s screen coordinates into an ArcGIS geometry Point that has the same spatial coordinate system as the MapView’s.</td></tr><tr><td style=\"text-align:left\">Point</td><td style=\"text-align:left\">toScreenPoint(Point src)</td><td style=\"text-align:left\">A convenience method that will convert an ArcGIS geometry Point from the MapView’s spatial coordinate system into the device’s screen coordinates.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">unpause()</td><td style=\"text-align:left\">Unpauses the map.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">zoomTo(Point centerPt, float factor)</td><td style=\"text-align:left\">If the MapView is initialized, zooms the map by a factor to the given center point.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">zoomToResolution(Point centerPt, double res)</td><td style=\"text-align:left\">Centers the map on the given point and zoom into the given resolution level.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">zoomToScale(Point centerPt, double scale)</td><td style=\"text-align:left\">Centers the map on the given point and zoom into the given scale level.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">zoomin()</td><td style=\"text-align:left\">Zooms in one level from current map resolution; the map animates to the new resolution.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">zoomin(boolean animated)</td><td style=\"text-align:left\">Zooms in one level from current map resolution; optionally, the change is animated.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">zoomout()</td><td style=\"text-align:left\">Zooms out one level from current map resolution; the map animates to the new resolution.</td></tr><tr><td style=\"text-align:left\">void</td><td style=\"text-align:left\">zoomout(boolean animated)</td><td style=\"text-align:left\">Zooms out one level from current map resolution; optionally, the change is animated.</td></tr></tbody></table><blockquote><p>参考资料<br>1、MapView | ArcGIS Android 10.2.7 API<br><a href=\"https://developers.arcgis.com/android/api-reference/reference/com/esri/android/map/MapView.html\" rel=\"external nofollow noopener noreferrer\" target=\"_blank\">https://developers.arcgis.com/android/api-reference/reference/com/esri/android/map/MapView.html</a><br>2、ArcGIS for Android地图控件的5大常见操作<br><a href=\"http://blog.csdn.net/arcgis_mobile/article/details/7801467\" rel=\"external nofollow noopener noreferrer\" target=\"_blank\">http://blog.csdn.net/arcgis_mobile/article/details/7801467</a><br>3、《ArcGIS Runtime SDK for Android开发笔记》——（9）、空间数据的容器-地图MapView - gis-luq - 博客园<br><a href=\"http://www.cnblogs.com/gis-luq/p/4941715.html\" rel=\"external nofollow noopener noreferrer\" target=\"_blank\">http://www.cnblogs.com/gis-luq/p/4941715.html</a><br>4、arcgis for android 学习 - (4) 了解mapView的一些方法和事件 - 张云飞VIR - 博客园<br><a href=\"http://www.cnblogs.com/vir56k/archive/2012/06/04/2534418.html\" rel=\"external nofollow noopener noreferrer\" target=\"_blank\">http://www.cnblogs.com/vir56k/archive/2012/06/04/2534418.html</a></p></blockquote>","categories":[{"name":"移动GIS技术","path":"api/categories/移动GIS技术.json"}],"tags":[{"name":"Android","path":"api/tags/Android.json"},{"name":"ArcGIS","path":"api/tags/ArcGIS.json"},{"name":"ArcGIS Runtime SDK","path":"api/tags/ArcGIS Runtime SDK.json"},{"name":"ArcGIS for Android","path":"api/tags/ArcGIS for Android.json"}]}