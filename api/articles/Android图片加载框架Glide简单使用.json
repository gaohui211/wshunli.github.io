{"title":"Android图片加载框架Glide简单使用","slug":"Android图片加载框架Glide简单使用","date":"2018-01-19T12:14:17.000Z","updated":"2018-04-08T14:48:55.063Z","comments":true,"path":"api/articles/Android图片加载框架Glide简单使用.json","excerpt":"Glide 是一个快速高效的 Android 图片加载库，注重于平滑的滚动。","covers":["https://img.wshunli.com/Android/Glide/Screenshot_1516366180.png-hexo.png"],"content":"<p>Glide 是一个快速高效的 Android 图片加载库，注重于平滑的滚动。<a id=\"more\"></a>Glide 提供了易用的 API，高性能、可扩展的图片解码管道（decode pipeline），以及自动的资源池技术。</p><h1 id=\"Glide-介绍\"><a href=\"#Glide-介绍\" class=\"headerlink\" title=\"Glide 介绍\"></a>Glide 介绍</h1><p>Glide 支持拉取，解码和展示视频快照，图片，和GIF动画。Glide的Api是如此的灵活，开发者甚至可以插入和替换成自己喜爱的任何网络栈。默认情况下，Glide使用的是一个定制化的基于HttpUrlConnection的栈，但同时也提供了与Google Volley和Square OkHttp快速集成的工具库。</p><p>虽然Glide 的主要目标是让任何形式的图片列表的滚动尽可能地变得更快、更平滑，但实际上，Glide几乎能满足你对远程图片的拉取/缩放/显示的一切需求。</p><h1 id=\"Glide-简单使用\"><a href=\"#Glide-简单使用\" class=\"headerlink\" title=\"Glide 简单使用\"></a>Glide 简单使用</h1><p>0、添加 Glide 依赖</p><pre><code class=\"gradle\">dependencies {\n  implementation &#39;com.github.bumptech.glide:glide:4.5.0&#39;\n  annotationProcessor &#39;com.github.bumptech.glide:compiler:4.5.0&#39;\n}\n</code></pre><p>1、准备图片容器</p><p>我们在布局文件中添加 ImageView 控件：</p><pre><code class=\"XML\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:orientation=&quot;vertical&quot;\n    android:background=&quot;#8f8f8f&quot;\n    tools:context=&quot;com.wshunli.glidedemo.MainActivity&quot;&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/bt&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;@string/app_name&quot; /&gt;\n\n    &lt;ImageView\n        android:id=&quot;@+id/img&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot; /&gt;\n&lt;/LinearLayout&gt;\n</code></pre><p>2、加载图片</p><p>我们以加载 <a href=\"https://img.wshunli.com/Android/Glide/Glide.min.png\" rel=\"external nofollow noopener noreferrer\" target=\"_blank\">https://img.wshunli.com/Android/Glide/Glide.min.png</a> 为例。</p><pre><code class=\"Java\">Glide.with(MainActivity.this)\n        .load(&quot;https://img.wshunli.com/Android/Glide/Glide.min.png&quot;)\n        .into(img);\n</code></pre><p>真的超级简单。</p><p>MainActivity 完整代码如下：</p><pre><code class=\"Java\">package com.wshunli.glidedemo;\n\nimport android.os.Bundle;\nimport android.support.v7.app.AppCompatActivity;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.ImageView;\n\nimport com.bumptech.glide.Glide;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private ImageView img;\n    private Button bt;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        img = findViewById(R.id.img);\n        bt = findViewById(R.id.bt);\n\n        bt.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                Glide.with(MainActivity.this)\n                        .load(&quot;https://img.wshunli.com/Android/Glide/Glide.min.png&quot;)\n                        .into(img);\n            }\n        });\n\n    }\n}\n</code></pre><p>注意别忘了声明权限：</p><pre><code class=\"XML\">&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\n</code></pre><p>3、取消加载图片</p><pre><code class=\"Java\">Glide.with(MainActivity.this).clear(img);\n</code></pre><p>取消加载也超级简单。</p><p>4、最终加载效果</p><p><img src=\"https://img.wshunli.com/Android/Glide/Screenshot_1516366180.png-hexo.png\" alt=\"Glide加载图图片\"></p><h1 id=\"ProGuard-混淆规则\"><a href=\"#ProGuard-混淆规则\" class=\"headerlink\" title=\"ProGuard 混淆规则\"></a>ProGuard 混淆规则</h1><pre><code class=\"gradle\">-keep public class * implements com.bumptech.glide.module.GlideModule\n-keep public class * extends com.bumptech.glide.module.AppGlideModule\n-keep public enum com.bumptech.glide.load.resource.bitmap.ImageHeaderParser$** {\n  **[] $VALUES;\n  public *;\n}\n\n# for DexGuard only\n-keepresourcexmlelements manifest/application/meta-data@value=GlideModule\n</code></pre><blockquote><p>参考资料<br>1、bumptech/glide: An image loading and caching library for Android focused on smooth scrolling<br><a href=\"https://github.com/bumptech/glide\" rel=\"external nofollow noopener noreferrer\" target=\"_blank\">https://github.com/bumptech/glide</a><br>2、Android图片加载框架最全解析（一），Glide的基本用法 - 郭霖的专栏 - CSDN博客<br><a href=\"http://blog.csdn.net/guolin_blog/article/details/53759439\" rel=\"external nofollow noopener noreferrer\" target=\"_blank\">http://blog.csdn.net/guolin_blog/article/details/53759439</a><br>3、Glide v4 : 快速高效的Android图片加载库<br><a href=\"https://muyangmin.github.io/glide-docs-cn/\" rel=\"external nofollow noopener noreferrer\" target=\"_blank\">https://muyangmin.github.io/glide-docs-cn/</a></p></blockquote>","categories":[{"name":"移动端技术","path":"api/categories/移动端技术.json"}],"tags":[{"name":"Android","path":"api/tags/Android.json"},{"name":"Glide","path":"api/tags/Glide.json"}]}